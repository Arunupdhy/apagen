<openerp>
    <data>
        
        <record id="view_purchase_requisition_form_inherited_apagen" model="ir.ui.view">
            <field name="name">purchase.requisition.form</field>
            <field name="model">purchase.requisition</field>
            <field name="inherit_id" ref="purchase_requisition.view_purchase_requisition_form"/>
            <field name="arch" type="xml">
                <!--<xpath expr="//field[@name='date_start']" position="attributes">
                    <attribute name="required">1</attribute>
                </xpath>-->
                <xpath expr="//form/sheet/div/h1/field[@name='name']" position="attributes">
                    <attribute name="readonly">1</attribute>
                </xpath>
                <xpath expr="//form/sheet/div[@class='pull-left']/h1/field[@name='origin']" position="attributes">
                    <attribute name="invisible">True</attribute>
                </xpath>
                
                <xpath expr="//form/sheet/group/group/field[@name='exclusive']" position="after">			
					<field name='creation_date'/>
				</xpath>
		
                
               
				<xpath expr="//form/sheet/group/group/field[@name='creation_date']" position="after">			
					<field name='account_analytic_id'/>
				</xpath>
				<xpath expr="//form/sheet/group/group/field[@name='account_analytic_id']" position="after">			
					<field name='company_id' widget="selection"/>
				</xpath>
		
                
                
                <xpath expr="//field[@name='user_id']" position="attributes">
                    <attribute name="required">1</attribute>
                </xpath>
               <!-- <xpath expr="//form/sheet/notebook/page/tree/field[@name='product_qty']" position="after">			
					<field name='product_uom_id'/>
				</xpath>-->
                
                
                
                
              <!--  <xpath expr="//field[@name='origin']" position="replace"/>
                <xpath expr="//label[@string=',']" position="replace"/>-->
                <!--<xpath expr="//field[@name=''origin']" position="attributes">			
					<attribute name="invisible">True</attribute>
				</xpath>-->
                
                <!--<xpath expr="//field[@name='warehouse_id']" position="replace"/>-->
                <!--<xpath expr="//field[@name='exclusive']" position="after">
                    <field name="warehouse_id" widget="selection" groups="stock.group_locations"/>
                </xpath>-->
                
                
                <xpath expr="//field[@name='multiple_rfq_per_supplier']" position="attributes">
                    <attribute name="invisible">True</attribute>
                </xpath>
                <xpath expr="//field[@name='product_id']" position="attributes">
                    <attribute name="required">1</attribute>
                </xpath>
                <xpath expr="//field[@name='product_qty']" position="attributes">
                    <attribute name="required">1</attribute>
                </xpath>
                <xpath expr="//field[@name='product_uom_id']" position="attributes">
                    <attribute name="required">1</attribute>
                </xpath>
            </field>
        </record>    
        
        <record id="view_purchase_order_form_inherited_apagen" model="ir.ui.view">
            <field name="name">purchase.order.form</field>
            <field name="model">purchase.order</field>
            <field name="inherit_id" ref="purchase.purchase_order_form"/>
            <field name="arch" type="xml">
                <xpath expr="//field[@name='company_id']" position="after">
                    <field name="requisition_id"/>
                </xpath>
                <xpath expr="//field[@name='pricelist_id']" position="after">
                    <field name="payment_term_id"/>
                </xpath>
                <xpath expr="//field[@name='location_id']" position="replace">
                    <field name="location_id" string='Destination Location'/>
                </xpath>
                <xpath expr="//field[@name='order_line']" position="replace">
                    <field name="order_line">
                        <tree string="Purchase Order Lines" editable="top">
                                    <field name="product_id" on_change="onchange_product_id(parent.pricelist_id,product_id,0,False,parent.partner_id, parent.date_order,parent.fiscal_position,date_planned,name,price_unit,context)"/>
                                    <field name="name"/>
                                    <field name="date_planned"/>
                                    <field name="account_analytic_id" groups="purchase.group_analytic_accounting" domain="[('type','not in',('view','template'))]" string="Analytic Account"/>
                                    <field name="product_qty" on_change="onchange_product_id(parent.pricelist_id,product_id,product_qty,product_uom,parent.partner_id,parent.date_order,parent.fiscal_position,date_planned,name,price_unit,context)"/>
                                    <field name="product_uom" groups="product.group_uom" on_change="onchange_product_uom(parent.pricelist_id,product_id,product_qty,product_uom,parent.partner_id, parent.date_order,parent.fiscal_position,date_planned,name,price_unit,context)" string="UoM"/>
                                    <field name="price_unit"/>
                                    <field name="taxes_id" widget="many2many_tags" domain="[('parent_id','=',False),('type_tax_use','!=','sale')]"/>
                                    <field name="price_subtotal"/>
                                </tree>
                    </field>
                </xpath>
                <xpath expr="//field[@name='dest_address_id']" position="replace"/>
                <xpath expr="//field[@name='date_approve']" position="replace"/>
                <!--<xpath expr="//page[@string='Incoming Shipments &amp; Invoices']/group/group/field[@name='payment_term_id']" position="replace"/>
                <xpath expr="//page[@string='Incoming Shipments &amp; Invoices']/group/group/field[@name='fiscal_position']" position="attributes">
                    <attribute name="invisible">1</attribute>
                </xpath>-->
            </field>
        </record>
        
        <record id="view_purchase_order_form_inherit_apagen" model="ir.ui.view">
            <field name="name">purchase.order.form.inherit</field>
            <field name="model">purchase.order</field>
            <field name="inherit_id" ref="purchase_requisition.purchase_order_form_inherit"/>
            <field name="arch" type="xml">
                <!--<xpath expr="//page[@string='Incoming Shipments &amp; Invoices']/group/group/field[@name='requisition_id']" position="replace"/>-->
                <xpath expr="//field[@name='validator']" position="replace"/>
            </field>
        </record>
            
        <record id="purchase.purchase_rfq" model="ir.actions.act_window">
            <field name="name">Request For Quotations</field>
            <field name="type">ir.actions.act_window</field>
            <field name="res_model">purchase.order</field>
            <field name="context">{}</field>
            <!-- <field name="domain">['&amp;', '|','|',('warehouse_id.officer_ids','in',uid),('warehouse_id.manager_id','=',uid), ('user_id','=',uid), ('state','in',('draft','awaiting_confirmed','sent','confirmed','refused'))]</field> -->
            <field name="domain">[('state','in',('draft','awaiting_confirmed','sent','confirmed','refused'))]</field>
            <field name="view_mode">tree,form,graph,calendar</field>
            <field name="search_view_id" ref="purchase.view_request_for_quotation_filter"/>
            <field name="help" type="html">
              <p class="oe_view_nocontent_create">
                Click to create a request for quotation.
              </p><p>
                The quotation contains the history of the discussion/negociation
                you had with your supplier. Once confirmed, a request for
                quotation is converted into a purchase order.
              </p><p>
                Most propositions of purchase orders are created automatically
                by OpenERP based on inventory needs.
              </p>
            </field>
        </record>
        <menuitem action="purchase.purchase_rfq" id="purchase.menu_purchase_rfq"
            parent="purchase.menu_procurement_management"
            sequence="1"/>
        
<!--        <delete id="purchase_requisition.menu_purchase_requisition_pro_mgt" model="ir.ui.menu"/>-->

        <record model="ir.actions.act_window" id="purchase_requisition.action_purchase_requisition">
        <field name="name">Call for Bids</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">purchase.requisition</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="context">{"search_default_user_id":uid}</field>
        <field name="search_view_id" ref="purchase_requisition.view_purchase_requisition_filter"/>
        <field name="help" type="html">
          <p class="oe_view_nocontent_create">
            Click to start a new purchase requisition process. 
          </p><p>
            A purchase requisition is the step before a request for quotation.
            In a purchase requisition (or purchase tender), you can record the
            products you need to buy and trigger the creation of RfQs to
            suppliers. After the negotiation, once you have reviewed all the
            supplier's offers, you can validate some and cancel others.
          </p>
        </field>
    </record>

    <menuitem
        id="purchase_requisition.menu_purchase_requisition_pro_mgt"
        sequence="0"
        parent="purchase.menu_procurement_management"
        action="purchase_requisition.action_purchase_requisition"/>        
        
    </data>
</openerp>
